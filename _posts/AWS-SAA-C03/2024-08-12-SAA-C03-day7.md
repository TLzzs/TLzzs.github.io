---
title: "SAA-C03 Day 7 | Route 53"
date: 2024-08-12 00:00:00
categories: [AWS, SAA-C03]
tags: [Route 53]
---

## what is a DNS

### DNS Terminologies
- Domain Registrar
- DNS Record: A, AAAA, CNAME, NS
- Zone File: contains DNS Records
- Name Server: resolve DNS queries


## Route 53

### Record Type
- A - map hostname to IPv4
- AAAA - map hostname to IPv6
- CNAME - map hostname to another hostname
  - the domain name must be an A orAAAA record
  - can not create for the TLD 
- NS record -  tell the DNS resolver where to find the authoritative DNS servers for a domain


### Public vs. Private Hosted Zones:
- **Public Hosted Zone:** Manages DNS records for a domain that is accessible on the public internet. For example,
  if you own example.com, you would have a public hosted zone that handles all the records for that domain.
- **Private Hosted Zone:** Used within a private network (like an Amazon VPC) to manage DNS records that are not 
  accessible on the public internet. This is useful for internal services that donâ€™t need to be exposed to the internet.

### TTL
- High TTL: less traffic on Route 53, but might outdated records
- Low TTL: More Traffic on Route 53 ($$) but fresh record
- Not used in Alias record


### CNAME vs Alias
- CNAME: points a hostname to any other hostname, must be non root domain
- Alias: points a hostname to an AWS Resource, works for non root and root
  - can be used in place of A records and AAAA records
  - native health check and free
  - can not set TTL, AWS default set

### Routing Policy
- it doesnt route any traffic, it only responds to the DNS query

1. Simple Policy
   - can specify multiple values in the record
   - random one will be chosen
   - if Alias is enabled, then just one aws resource be specify
   - no health check
2. Weighted Policy
   - control the % of the traffic that go to each specific resource
   - doesnt need sum to 100
   - can have health check
   - assign weight 0 to stop sending traffic
3. Latency Policy
   - Redirect to the resource that has least latency
   - latency is based on traffic between user and aws region
   - can have health check
4. Failover Policy
   - mandatory health check
5. Geolocation Policy
   - based on user location
   - should have A Default record in case no match on location
   - can have health check
6. GeoProximity
   - You specify the locations of your resources (e.g., AWS regions, on-premises data centers).
   - Bias Adjustment:
     - You can adjust the bias for each location to either increase or decrease the portion of traffic routed to that location. 
     - Positive Bias: Expands the geographic region from which traffic is routed to the resource. 
     - Negative Bias: Shrinks the geographic region, potentially reducing traffic to that resource.
7. IP based Routing
8. Multi Value

### Health Checks
- http health checks are only for public resource
- Operate at the DNS level, across global infrastructure.
- monitor an endpoint, otehr healthcheck, cloud watch
- **Private Hosted Zone**: we need to create cloud watch alarm because health check is outside the VPC

#### monitor an end point
1. Suppose you have a web server running at www.example.com.
2. You set up a Route 53 health check to monitor the www.example.com/health endpoint using HTTP.
3. oute 53 sends regular HTTP GET requests to www.example.com/health from multiple locations.
4. If the web server responds with a 200 OK status, the endpoint is considered healthy.
5. If the web server starts returning a 500 error, Route 53 will mark the endpoint as unhealthy after a set number of failed checks.
6. Route 53 can then automatically reroute traffic to a backup server or another region if you have a failover policy configured.

#### calculated health check
- Aggregates Multiple Health Checks: Combines the results of several individual health checks.
- Logical Conditions: Uses AND, OR, NOT logic to determine overall health.
- Overall Health Status: The calculated health check is considered healthy based on the combined results of the child health checks.
- Complex Monitoring: Ideal for systems where multiple components must be healthy.
- Routing Decisions: Influences DNS routing based on the overall health of aggregated components.
