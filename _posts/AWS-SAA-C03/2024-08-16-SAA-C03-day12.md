---
title: "SAA-C03 Day 12 | Containers on AWS: ECS, Fargate, ECR EKS"
date: 2024-08-17 00:00:00
categories: [AWS, SAA-C03]
tags: [ECS, Fargate, ECR, EKS]
---

### ECS
- Launch Docker container on AWS = Launch **ECS Tasks** On ECS Clusters
- ECS Launch Type
  - EC2 Launch Type : you must provision & maintain the infra (EC2 instances)
  - each EC2 instance must run the ECS Agent to register in the ECS Cluster
- Fargate Launch Type: don't have to manage any EC2 instances(serverless). AWS manages the infrastructure, and you only need to define your task and service configurations.

#### IAM Role for ECS
- For EC2 Launch Type:
  - the EC2 Instance Profile will be used by ECS agent to make API call to ECS service
  - Also can send Container logs to the cloudwatch logs
  - Can Pll Docker IMage from ECR
  - Reference SSM or Secret Manager
- ECS Task Role:
  - Allows each task to have a specific role (target to different AWS services)

#### Load Balancer Integration
- Application Load Balancer: supported and works for most use cases
- Network Load Balancer: recommended only for high throughput/high performance use cases or pair it with AWS private Link

#### Volume Mount (EFS)
- Can Mount EFS file system onto ECS tasks
- work for both EC2 and Farget launch type
- S3 can not be mounted as a file system


#### Service
- Service: Manages tasks that are all instances of the same task definition.
- AUto Scaling: auto increase/decrease the desired number of ECS tasks
  - metric - CPU Utilization
  - metric - Memory Utilization
  - metric - ALB Request Count Per Target
- task level scale != EC2 AUto Scaling
- if you want to autoscale EC2 (ASG, ECS Cluster Capacity Provider)

### EKS
- EKS supports EC2 or Fargate (serverless)
- Easy to migrate to other platform

#### EKS Node Type
Managed Node Groups
  - creates and manages Nodes(EC2)for you
  - Node are part of ASH managed by EKS
  - supports on demand and spot instance

Self Managed Nodes
  - Node created by you and registered to EKS cluster and managed by ASG
  - can use AMI
  - supports on demand and spot instance

AWS Fargate
  - No maintenance required: no nodes managed


#### EKS Data Volume
- suports for ebs . efs with fargate FSx series


### AWS App Runner
-  fully managed service tyhat make it easy to deploy wen or apis
- no ifra
- auto builds and deploy
