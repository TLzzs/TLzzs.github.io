---
title: "SAA-C03 Day 4 | EC2 Storage : EBS, EFS, Instance store"
date: 2024-08-08 00:00:00
categories: [AWS, SAA-C03]
tags: [EC2]
---

## EC2 Instance Storage: EBS
- allows instance to persist data even after termination
- only can be mounted to one instance at a time
- specific to one AZ (To move a volume across, first need to snapshot)
- Delete On Termination Attribute: controls EBS behavior when EC2 terminates
  - By default: root EBS volume is deleted
  - By default: any other attached EBS volume is not deleted

### EBS Snapshot
- recommend to detach the volume and do the backup , but dont need to
- can copy snapshot across AZ or Region
  - create snapshot from the volume and restore it in another AZ/region

### EBS SnapShot feature
- EBS Snapshot archive
  - move a snapshot to archive tire, cheaper
  - takes 24 - 72 hours for restoring
- Recycle Bin for EBS snapshot
  - setup rules to retain deleted snapshot so u can recover after an accidental deletion
  - specify retention period (1 day to 1 year)

### EBS Encryption
- Encrypted EBS means: 
  - Data at rest is encrypted
  - data in the flight moving between instance and volume is encrypted
  - all snapshot are encrypted
  - volume created via snapshot are encrypted
- Step
  1. create an EBS snapshot
  2. encrypt the snapshot
  3. create new EBS from the encrypted snapshot
  4. attach the newly created volume to the instance
### EBS Volume Type
- **gp2/gp3(SSD):** balances price and performance for a wide variety of workloads
- **io1/io2 (SSD):** Highest performance SSD volume for mission critical low latency or high throughput workloads
  - Best for I/O-intensive applications such as large relational or NoSQL databases
- **st1 (HDD):** low cost HDD volume designed for frequently accessed , throughput=intensive workloads
  - Ideal for frequently accessed, throughput-intensive workloads such as big data, data warehouses, and log processing.
- **sc1 (HDD):** Lowest cost HDD volume designed for less frequently accessed workload
  -  Suitable for less frequently accessed workloads such as colder data requiring fewer scans per day
- only SSD can be used as boot volume (running OS)

### EBS MultiAttach - io1/io2 family
- attach the same EBS volume to multiple EC2 instance **in the same AZ**
- but only suitable for **io1/io2**
- up to 16 ec2

## EC2: AMI
- customization of an EC2 instance
  - add ur own software, configuration , os,
  - faster boot / configuration time, because all your software is pre-package
- AMI are build for specific region (but can be copied across region)

### AMI Process
1. start an EC2 instance and customize
2. stop instance (for data integrity)
3. build an AMI- this will also create EBS snapshot
4. launch instance from other AMIs

## EC2 Instance Store
- EBS has limited performance
- EC2 Instance Store: better I/O performance
- However, ec2 instance store lose their storage if they stop
- Risk of data loss


## EC2: EFS
- can be mounted on many EC2 (many instance connect to the fie system)
- works in multi AZ 
- set up a security group
- scale automatically

### EFS storage class tier (life policy feature -move file to tier after N days)
- standard: frequently accessed file
- infrequent access: cost to retrieve files, low price to store
- archive: rarely accessed data (few times each year)

### File System Type: Availability and durability
- standard: Multi AZ, great for prod
- one Zone: compatable with EFS-IA, great for dev, backup
